module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},19817,53250,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=0,e=null;function f(a){e=a}async function g(a,b={},c,f=!1){try{f&&(d++,e?.(!0));let g=await fetch(`http://192.168.100.151:8000/api${a}`,{...b,headers:{Accept:"application/json","Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{},...b.headers}}),h=null;try{h=await g.json()}catch{}if(!g.ok)throw h||{message:"Terjadi kesalahan server"};return h}finally{f&&0==--d&&e?.(!1)}}async function h(a){let b=`http://192.168.100.151:8000/api/products${a?`?${a}`:""}`,c=await fetch(b,{cache:"no-store"});if(!c.ok)throw Error("Failed to fetch products");return c.json()}async function i(){let a=await fetch("http://192.168.100.151:8000/api/product-categories",{cache:"no-store"});if(!a.ok)throw Error("Failed to fetch categories");return a.json()}async function j(a,b){return g("/cart/validate",{method:"POST",body:JSON.stringify({items:a.map(a=>({product_id:a.productId,product_variant_id:a.variantId,quantity:a.quantity}))})},b)}let k=async(a,b)=>g("/cart",{method:"POST",body:JSON.stringify({items:[{product_id:b.productId,product_variant_id:b.variantId,quantity:b.quantity}]})},a);async function l(a,b,c){return g(`/cart/${a}`,{method:"PUT",body:JSON.stringify({quantity:b})},c,!0)}async function m(a,b){return g(`/cart/${a}`,{method:"DELETE"},b,!0)}async function n(a){return g("/cart/clear",{method:"DELETE"},a,!0)}let o=async a=>g("/orders/my",{method:"GET"},a);async function p(a,b){return g(`/orders/${a}`,{method:"GET"},b)}a.s(["addCartAPI",0,k,"apiFetch",()=>g,"clearCartAPI",()=>n,"deleteCartItemAPI",()=>m,"fetchCategories",()=>i,"fetchProducts",()=>h,"getMyOrdersAPI",0,o,"getOrderDetailAPI",()=>p,"setGlobalLoadingHandler",()=>f,"updateCartItemAPI",()=>l,"validateCartAPI",()=>j],53250);let q=(0,c.createContext)(void 0);function r({children:a}){let[d,e]=(0,c.useState)(!0),[f,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=localStorage.getItem("petshop-user"),b=localStorage.getItem("petshop-token");if(!a||!b)return void e(!1);try{let c=JSON.parse(a);h(c),j(b)}catch{localStorage.removeItem("petshop-user"),localStorage.removeItem("petshop-token")}e(!1)},[]);let k=async a=>{let b,c=localStorage.getItem("petshop-cart");if(c){try{b=JSON.parse(c)}catch{console.error("Invalid guest cart format");return}if(Array.isArray(b)&&0!==b.length)try{await g("/cart",{method:"POST",body:JSON.stringify({items:b.map(a=>({product_id:a.productId,product_variant_id:a.variantId,quantity:a.quantity}))})},a),localStorage.removeItem("petshop-cart"),localStorage.setItem("petshop-cart-source","db")}catch(a){console.error("Failed to sync guest cart:",a)}}},l=async(a,b)=>{a&&b&&(h(a),j(b),localStorage.setItem("petshop-user",JSON.stringify(a)),localStorage.setItem("petshop-token",b),await k(b))},m=async()=>{try{i&&await fetch("http://192.168.100.151:8000/api/logout",{method:"POST",headers:{Authorization:`Bearer ${i}`,Accept:"application/json"}})}catch(a){console.error("Logout error:",a)}finally{h(null),j(null),localStorage.removeItem("petshop-user"),localStorage.removeItem("petshop-token"),localStorage.removeItem("petshop-cart"),localStorage.removeItem("petshop-cart-source"),window.location.href="/login"}};return(0,b.jsx)(q.Provider,{value:{user:f,isAuthenticated:!!f,authLoading:d,login:l,logout:m},children:a})}function s(){let a=(0,c.useContext)(q);if(!a)throw Error("useAuth must be used inside AuthProvider");return a}a.s(["AuthProvider",()=>r,"useAuth",()=>s],19817)},36107,70246,87070,a=>{"use strict";var b=a.i(87924),c=a.i(53250),d=a.i(72131),e=a.i(19817);let f=0,g=new Map,h=a=>{if(g.has(a))return;let b=setTimeout(()=>{g.delete(a),k({type:"REMOVE_TOAST",toastId:a})},1e6);g.set(a,b)},i=[],j={toasts:[]};function k(a){j=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?h(c):a.toasts.forEach(a=>{h(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(j,a),i.forEach(a=>{a(j)})}function l({...a}){let b=(f=(f+1)%Number.MAX_SAFE_INTEGER).toString(),c=()=>k({type:"DISMISS_TOAST",toastId:b});return k({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||c()}}}),{id:b,dismiss:c,update:a=>k({type:"UPDATE_TOAST",toast:{...a,id:b}})}}a.s(["toast",()=>l],70246);let m=(0,d.createContext)(void 0);function n({children:a}){let[f,g]=(0,d.useState)([]),[h,i]=(0,d.useState)([]),[j,k]=(0,d.useState)(0),[n,o]=(0,d.useState)(!1),[p,q]=(0,d.useState)(!1),[r,s]=(0,d.useState)(null),{isAuthenticated:t,authLoading:u}=(0,e.useAuth)(),[v,w]=(0,d.useState)(!1),x=async()=>{};(0,d.useEffect)(()=>{u||(async()=>{if(t)await x();else{try{let a=localStorage.getItem("petshop-cart");a&&g(JSON.parse(a))}catch{localStorage.removeItem("petshop-cart")}w(!0)}o(!0)})()},[u,t]),(0,d.useEffect)(()=>{n&&v&&(localStorage.setItem("petshop-cart",JSON.stringify(f)),f.length>0?y():(i([]),k(0),q(!1)))},[f,n,v]);let y=async()=>{try{let a=await (0,c.validateCartAPI)(f);i(a.items.map((a,b)=>{let c=f.find(b=>b.productId===a.product_id&&b.variantId===(a.product_variant_id??null));return{cartItemId:c?.cartItemId,productId:a.product_id,variantId:a.product_variant_id,name:a.name??null,image:a.image??null,price:a.price??0,quantity:a.quantity,subtotal:a.subtotal??0,available:a.available,reason:a.reason??null}})),k(a.total??0)}catch(a){console.error("Cart validation error:",a)}finally{q(!1)}},z=async a=>{let b=localStorage.getItem("petshop-token");if(t&&b)try{await (0,c.addCartAPI)(b,a),await x(),localStorage.removeItem("petshop-cart"),localStorage.setItem("petshop-cart-source","db");return}catch(a){console.error("Failed to sync guest cart:",a)}g(b=>b.find(b=>b.productId===a.productId&&b.variantId===a.variantId)?b.map(b=>b.productId===a.productId&&b.variantId===a.variantId?{...b,quantity:b.quantity+a.quantity}:b):[...b,{...a,cartItemId:Date.now()}])},A=async a=>{let b=f.find(b=>b.productId===a.productId&&b.variantId===a.variantId);if(!b)return;if(a.quantity<1){if(!b?.cartItemId)return;await B(b.cartItemId);return}g(c=>c.map(c=>c===b?{...c,quantity:a.quantity}:c));let d=localStorage.getItem("petshop-token");if(t&&d)try{await (0,c.updateCartItemAPI)(b.cartItemId,a.quantity,d),l({title:"Quantitas diperbarui",description:"Quantitas item di keranjang telah diperbarui.",variant:"default"})}catch(a){console.error("Failed update qty",a)}},B=async a=>{if(console.log("REMOVE ITEM CALLED:",a),!a)return;let b=f.find(b=>b.cartItemId===a);if(g(b=>b.filter(b=>b.cartItemId!==a)),!t)return;let d=localStorage.getItem("petshop-token");if(d)try{await (0,c.deleteCartItemAPI)(a,d)}catch(a){console.log("DELETE ERROR:",JSON.stringify(a)),b&&g(a=>[...a,b])}},C=async()=>{if(g([]),i([]),k(0),localStorage.removeItem("petshop-cart"),t)try{let a=localStorage.getItem("petshop-token");if(!a)return;await (0,c.clearCartAPI)(a)}catch(a){console.error("Failed clear cart",a),g(f)}},D=async()=>{f.length&&await y()},E=h.some(a=>!a.available);return(0,b.jsx)(m.Provider,{value:{cart:f,viewCart:h,total:j,hasUnavailable:E,loading:p,addToCart:z,updateQuantity:A,removeItem:B,clearCart:C,refresh:D},children:a})}function o(){let a=(0,d.useContext)(m);if(!a)throw Error("useCart must be used within CartProvider");return a}a.s(["CartProvider",()=>n,"useCart",()=>o],36107);let p=(0,d.createContext)(null);function q({children:a}){let[c,e]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let a;return(async()=>{})(),()=>{a?.disable&&a.disable()}},[]);let f=async()=>{};return(0,b.jsx)(p.Provider,{value:{enabled:c,toggle:f},children:a})}function r(){let a=(0,d.useContext)(p);if(!a)throw Error("useDarkReader must be used within DarkReaderProvider");return a}a.s(["DarkReaderProvider",()=>q,"useDarkReader",()=>r],87070)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__354bfcc2._.js.map